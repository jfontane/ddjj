{% extends "@JubilacionesDeclaraciones/layout.html.twig" %}
{% block title %}Listado de Declaraciones Juradas{% endblock %}
{% block pageid 'admin' %}

{% block body %}
{# CONTENIDO ORIGINAL DEL ARCHIVO Y SIN LAS ETIQUETAS <html><body> � </body></html> #}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{{ path('principal_logueado') }}">Home</a></li>
    <li class="breadcrumb-item" aria-current="page"><a href="{{ path('contralor_declaracion_opciones') }}">Declaraciones Juradas</a></li>
    <li class="breadcrumb-item active" aria-current="page">Declaraciones Pendientes</li>
  </ol>
</nav>

<!-- MENSAJES FLASH ADMIN AQUÍ (utilizar <div class=”flash_admin”> </div>) -->
<div>
  {% if tipo == 'Pendientes' %}
  <p><img src="{{ asset('bundles/jubilacionesdeclaraciones/img/amarillo.png') }}"><b>&nbsp;&nbsp;Declaraciones Juradas {{ tipo }}&nbsp;&nbsp;</b></p>
  {% elseif tipo == 'Rechazadas' %}
  <p><img src="{{ asset('bundles/jubilacionesdeclaraciones/img/rojo.png') }}"><b>&nbsp;&nbsp;Declaraciones Juradas {{ tipo }}&nbsp;&nbsp;</b></p>
  {% elseif tipo == 'Aprobadas' %}
  <p><img src="{{ asset('bundles/jubilacionesdeclaraciones/img/verde.png') }}"><b>&nbsp;&nbsp;Declaraciones Juradas {{ tipo }}&nbsp;&nbsp;</b></p>
  {% endif %}

</div>

<div class="flash_admin">
  {% for mensaje in app.session.flashbag.get('warn') %}
  <p class="warn">{{ mensaje }}</p>
  {% endfor %}
</div>

<div class="grid_16">
  <table class="table">
    <thead class="thead-dark">
      <tr>
        <th>Organismo</th>
        <th>Zona</th>
        <th>Periodo</th>
        <th>T.Liq.</th>
        <th>F.Entrega</th>
        <th>F.Ingreso</th>

        <th>Estado</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for declaracion in pagination %}
      <tr>
        <td>{{ declaracion.organismo.codigo }}</td>
        <td>
          {{ declaracion.organismo.zona }}
        </td>
        <td>
          <a href="">  {{ declaracion.periodoAnio }}/{{ declaracion.periodoMes }}</a>
        </td>
        <td>{{ declaracion.tipoLiquidacion }}</td>
        <td>
          {{  declaracion.fechaEntrega is empty ? "" : declaracion.fechaEntrega | date('Y-m-d H:i') }}
        </td>
        <td>
          {{  declaracion.fechaIngreso is empty ? "" : declaracion.fechaIngreso | date('Y-m-d H:i') }}
        </td>
        <td>{{ declaracion.estado }}</td>
        <td>
          {% if tipo == 'Pendientes' %}
          <a href="{{path('contralor_mostrar_totales',{'id' : declaracion.id })}}" class="btn btn-primary">Cargar</a>
          {% endif %}
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="8">No existe ninguna Declaracion Jurada</td>
      </tr>
      {% endfor %}
    </tbody>

  </table>
  <div class="navigation">
    {{ knp_pagination_render(pagination) }}
  </div>
</div>
{% endblock %}
{% block javascripts %}
<script>
function confirmaBorrar() {
  if (confirm("Desea Eliminar un Evento???")) {
    //location.href
  }
}
</script>
{% endblock %}
